<html xmlns:th="http://www.thymeleaf.org">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="icon" href="/images/favicon.ico">
<!-- Top navigation-->

<th:block th:fragment="header">
	<input type="hidden" id="battery0" th:value="${currentUser.battery}">
	
	<nav class="navbar navbar-expand-lg navbar-light border-bottom"
		style="width: 1200px; background-color: transparent;">
		<div class="container-fluid" style="background-color: transparent;">
			<b> ğŸ¥•ë‹¹ë‚˜ë²ˆê³µ</b>
			<div class="collapse navbar-collapse" id="navbarSupportedContent"
				style="flex-grow: 10;">
				<ul class="navbar-nav ms-auto mt-2 mt-lg-0"
					style="width: 70%; justify-content: space-between; margin: 0 auto">
					<li class="nav-item dropdown"><a
						class="nav-link dropdown-toggle" id="navbarDropdown" href="#"
						role="button" data-bs-toggle="dropdown" aria-haspopup="true"
						aria-expanded="false">ì¼ë°˜/ê²½ë§¤</a>
						<div class="dropdown-menu dropdown-menu-end"
							aria-labelledby="navbarDropdown">
							<a class="dropdown-item" href="/product/getProductList?type=prod">ğŸº ì¼ë°˜
								ìƒí’ˆ</a> <a class="dropdown-item"
								href="/product/getProductList?type=auc">ğŸ™‹ ê²½ë§¤ ìƒí’ˆ</a>
						</div></li>
					<li class="nav-item dropdown"><a
						class="nav-link dropdown-toggle" id="navbarDropdown" href="#"
						role="button" data-bs-toggle="dropdown" aria-haspopup="true"
						aria-expanded="false">ì»¤ë®¤ë‹ˆí‹°</a>
						<div class="dropdown-menu dropdown-menu-end"
							aria-labelledby="navbarDropdown">

							<a class="dropdown-item" href="/board/getBoardList?type=notice">ğŸš¨
								ê³µì§€ì‚¬í•­</a> <a class="dropdown-item"
								href="/board/getBoardList?type=lost">ğŸ˜¥ ìƒì–´ë²„ë ¸ì–´ìš”</a> <a
								class="dropdown-item" href="/board/getBoardList?type=food">ğŸ”
								ì—¬ê¸° ë§›ë‚˜ìš”</a> <a class="dropdown-item"
								href="/board/getBoardList?type=tmi">ğŸ”‰ ì•Œë ¤ë“œë ¤ìš”</a> <a
								class="dropdown-item" href="/board/getBoardList?type=qna">â“
								&nbsp;ê¶ê¸ˆí•´ìš”</a> <a class="dropdown-item"
								href="/board/getBoardList?type=meet">ğŸ• ìš°ë¦¬ë§Œë‚˜ìš”</a>
						</div></li>


					<li class="nav-item dropdown">
					
					<a th:if="${currentUser.auth.toString() == 'MEMBER'}" class="nav-link dropdown-toggle" id="navbarDropdown" href="#"
						role="button" data-bs-toggle="dropdown" aria-haspopup="true"
						aria-expanded="false" onclick="modalOpen()">ì²œë‘¥ë§¨</a>
					<a th:unless="${currentUser.auth.toString() == 'MEMBER'}" class="nav-link dropdown-toggle" id="navbarDropdown" href="#"
						role="button" data-bs-toggle="dropdown" aria-haspopup="true"
						aria-expanded="false">ì²œë‘¥ë§¨</a>	
						<div class="dropdown-menu dropdown-menu-end"
							aria-labelledby="navbarDropdown">
							
						<!-- thunder modal -->
							<div id="modalContainer" class="hidden">
								<div id="modalContent">
									<h2 class="center" style="margin:20px 0px 20px 0px"> âš¡ì²œë‘¥ë§¨ì´ ì•„ë‹ˆì‹œêµ°ìš”!</h2>
									<p style="margin-bottom:30px"> ë°°í„°ë¦¬ ì”ëŸ‰ì´ ğŸ”‹60% ì´ìƒì¸ íšŒì›ë§Œ ì²œë‘¥ë§¨ìœ¼ë¡œ ì „í™˜ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë‹¹ì‹ ë„ ì²œë‘¥ë§¨ì´ ë  ìˆ˜ ìˆì–´ìš”!!</p>
									<div class="center">
									<input type="hidden" id="memberThunderId" th:value="${currentUser.id}" />
									<th:block th:if="${currentUser.battery >= 60}">
									
		                               <button type="button" data-toggle="modal" onclick="transformThunder()" style="padding:20px 40px; margin-right:10px">ğŸŒ  ì²œë‘¥ë§¨ ë˜ì–´ë³´ê¸°</button>
		                               <button type="button" data-toggle="modal" onclick="modalClose()" style="padding:20px 40px">ğŸ‘¦ ì¼ë°˜ì¸ìœ¼ë¡œ ì‚´ê¸°</button>
		                           
		                            </th:block>
		                            <th:block th:if="${currentUser.battery < 60}">
		                               <button type="button" data-toggle="modal" data-target="#login" style="padding:20px 40px; margin-right:10px; font-size:1.1rem" >â›” ì²œë‘¥ë§¨ì´ ë˜ê¸°ì—” ë°°í„°ë¦¬ ìš©ëŸ‰ì´ ë¶€ì¡±í•´ìš”! â›”</button>
		                            </th:block>   
										
									</div>
								</div>
							</div>
						<!-- thunder modal end -->
							
							<a class="dropdown-item" href="/thunder/myThunderList">ğŸ“¤ ëŒ€ê¸°ì¤‘ì¸
								ìƒí’ˆë³´ê¸°</a><a class="dropdown-item" href="/thunder/standByList">ğŸ“¦
								ë‚´ ë°°ë‹¬ ë‚´ì—­</a>
						</div></li>
					<li class="nav-item dropdown"><a
						class="nav-link dropdown-toggle" id="navbarDropdown" href="#"
						role="button" data-bs-toggle="dropdown" aria-haspopup="true"
						aria-expanded="false">ë§ˆì´í˜ì´ì§€</a>
						<div class="dropdown-menu dropdown-menu-end"
							aria-labelledby="navbarDropdown">
							<a class="dropdown-item"
								th:href="@{/mypage/myPageMain(id=${currentUser.id})}">ë§ˆì´í˜ì´ì§€
								í™ˆ</a> <a class="dropdown-item" href="/mypage/myDetails">ë‚´ ì •ë³´</a> <a
								class="dropdown-item"
								th:href="@{/mypage/myPostList(id=${currentUser.id})}">ë‚´ ê²Œì‹œê¸€</a>
							<a class="dropdown-item"
								th:href="@{/mypage/myProductList(id=${currentUser.id})}">ë‚´
								íŒë§¤ìƒí’ˆ</a> <a class="dropdown-item" href="/mypage/myBuyList">êµ¬ë§¤ ë‚´ì—­</a>
							<a class="dropdown-item" href="/mypage/myWishList">ë‚´ê°€ ì°œí•œ ìƒí’ˆ</a> <a
								class="dropdown-item"
								th:href="@{/mypage/myReviewList(id=${currentUser.id})}">ë°›ì€
								í›„ê¸°</a> <a class="dropdown-item" href="/mypage/myDeposit">ì¬ë”í˜ì´</a>
						</div></li>

					<li class="nav-item dropdown"><a
						class="nav-link dropdown-toggle" id="navbarDropdown" href="#"
						role="button" data-bs-toggle="dropdown" aria-haspopup="true"
						aria-expanded="false">ê´€ë¦¬ì</a>
						<div class="dropdown-menu dropdown-menu-end"
							aria-labelledby="navbarDropdown">
							<a class="dropdown-item" href="/admin/adminMain">ê´€ë¦¬ì í™ˆ</a> <a
								class="dropdown-item" href="/admin/getReportList">ì‹ ê³  ëª©ë¡</a> <a
								class="dropdown-item" href="/admin/getMemberList">íšŒì›ê´€ë¦¬</a>
						</div></li>

				</ul>
			</div>


			<div class="collapse navbar-collapse" id="navbarSupportedContent"
				style="flex-grow: 1">
				<ul class="navbar-nav ms-auto mt-2 mt-lg-0">
					<li class="nav-item dropdown"><a
						class="nav-link dropdown-toggle" id="navbarDropdown" href="#"
						role="button" data-bs-toggle="dropdown" aria-haspopup="true"
						aria-expanded="false"><span th:text="${currentUser.nickName}"></span>ë‹˜</a>
						<div class="dropdown-menu dropdown-menu-end"
							aria-labelledby="navbarDropdown">
							<a class="dropdown-item" href="/mypage/myPageMain">ë§ˆì´í˜ì´ì§€</a> <a
								class="dropdown-item" href="/system/logout">ë¡œê·¸ì•„ì›ƒ</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" href="#!">ë¬¸ì˜í•˜ê¸°</a> <a
								class="dropdown-item" href="#!">ì•Œë¦¼</a>
						</div></li>
				</ul>
			</div>
			<!-- ë°°í„°ë¦¬ -->
			<div
				th:if="${currentUser.battery >= 0 and currentUser.battery <= 20}">
				<!-- 0~20 ë²”ìœ„ì— í•´ë‹¹í•˜ëŠ” ê²½ìš° -->
				<img id="batt" class="battery_img_mini"
					src="/images/noThunder_red.png">
			</div>
			<div
				th:if="${currentUser.battery >= 21 and currentUser.battery <= 40}">
				<!-- 21~40 ë²”ìœ„ì— í•´ë‹¹í•˜ëŠ” ê²½ìš° -->
				<img id="batt" class="battery_img_mini"
					src="/images/noThunder_orange.png">
			</div>
			<div
				th:if="${currentUser.battery >= 41 and currentUser.battery <= 60}">
				<!-- 41~60 ë²”ìœ„ì— í•´ë‹¹í•˜ëŠ” ê²½ìš° -->
				<img id="batt" class="battery_img_mini"
					src="/images/noThunder_yellow.png">
			</div>
			<div
				th:if="${currentUser.battery >= 61 and currentUser.battery <= 80}">

				<!-- 61~80 ë²”ìœ„ì— í•´ë‹¹í•˜ëŠ” ê²½ìš° -->
				<img id="batt" class="battery_img_mini"
					src="/images/noThunder_green.png">
			</div>
			<div
				th:if="${currentUser.battery >= 81 and currentUser.battery <= 100}">
				<!-- 81~100 ë²”ìœ„ì— í•´ë‹¹í•˜ëŠ” ê²½ìš° -->
				<img id="batt" class="battery_img_mini"
					src="/images/noThunder_blue.png">
			</div>
			<!-- ë°°í„°ë¦¬ ë -->
			&nbsp;<span style="font-size: small; font-weight: bold; color: #333"><span
				th:text="${currentUser.battery}"></span>%</span>
		</div>
	</nav>
	<!-- Css -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@300&family=Gowun+Dodum&family=IBM+Plex+Sans+KR:wght@300&family=Nanum+Myeongjo&display=swap" rel="stylesheet">
<link
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
		rel="stylesheet">
	<link th:href="@{/css/standByList.css}" rel="stylesheet">	
	<link th:href="@{/css/main.css}" rel="stylesheet">
	<link th:href="@{/css/product.css}" rel="stylesheet">
	<!-- Bootstrap core JS-->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
	<!-- jquery -->
	<script type="text/javascript"
		src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	<script type="text/javascript"
		src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
	<script type="text/javascript">
	
		/* window.onload = function battery() {
			let battery = $('#battery0').val(); 
			
			let replyData = {
						"memberThunderId" : $('#memberThunderId').val(),
						"battery" : battery
					 };
			
			if(battery==0) {
				$.ajax({
				       type: "POST",
				       url: "/admin/0BatDeleteMember",
				       data: JSON.stringify(replyData),
				       contentType: "application/json",
				       success: function(response) {
				    	   alert("ë°°í„°ë¦¬ ë¶€ì¡±ìœ¼ë¡œ ë‹¹ë‚˜ë²ˆê³µì´ ì¢…ë£Œë©ë‹ˆë‹¤.");
				    	   location.href='http://localhost:8081/system/login';
				       },
				       error: function(error) {
				           alert("ì—ëŸ¬");
				       }
				   });
			} else {
				return;
			}
		} */
		
		function transformThunder() { // ì²œë‘¥ë§¨ ë³€ì‹ !
		    console.log("thunderTrans!");
			
			 let replyData = {
				"memberThunderId" : $('#memberThunderId').val()
			 };
			 
			$.ajax({
		       type: "POST",
		       url: "/thunder/transformThunder",
		       data: JSON.stringify(replyData),
		       contentType: "application/json",
		       success: function(response) {
		    	   alert("í™˜ì˜í•©ë‹ˆë‹¤! ìƒˆë¡œìš´ ì²œë‘¥ë§¨! \në‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì‹œë©´ ì²œë‘¥ë§¨ìœ¼ë¡œ í™œë™ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
		    	   location.href='http://localhost:8081/system/login';
		       },
		       error: function(error) {
		           alert("thunder ì„ ã…‹ã…‹");
		       }
		   });
		}
		
		function blink() {
			let batt = document.getElementById("batt");
			let src = batt.getAttribute('src');
			if (src.startsWith('/images/no')) {
				let sub = src.substring(10, src.length);
				batt.setAttribute('src', '/images/yes' + sub);
			} else {
				let sub = src.substring(11, src.length);
				batt.setAttribute('src', '/images/no' + sub);
			}
		}
		blink();
		setInterval(blink, 500);
		
		
		function modalOpen() { // modalì°½ ì—´ê¸°
		    const modal = document.getElementById('modalContainer');
		    modal.classList.remove('hidden');
		}
		
		function modalClose() { // modalì°½ ë‹«ê¸°
		    const modal = document.getElementById('modalContainer');
		    modal.classList.add('hidden');
		}
	</script>
</th:block>
</html>